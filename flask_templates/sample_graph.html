{% set s = self_info %}
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Crucible</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

</head>

<body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

<nav aria-label="breadcrumb">
  <ol class="breadcrumb breadcrumb-chevron p-3 bg-body-tertiary border rounded-3">
    <li class="breadcrumb-item"><a href="/{{pc['project_id']}}/"><b>Project</b> {{pc['project_id']}}</a></li>
    <li class="breadcrumb-item active" aria-current="page"><b>Sample</b> {{s['sample_name']}}</li>
  </ol>
</nav>

<div class="container">
<h1> Sample Graph for {{s['sample_name']}} <span style="color: gray;">{{s['unique_id'][:13]}}</h1>

<div class="container card">

    <ul>
    <li><b>Description:</b> {{s['description']}}</li>
    <li><b>Datasets:</b>
        <ul>
            {% for ds in s['datasets'] %}
            <li>
                <a href="/{{pc['project_id']}}/dataset/{{ds['unique_id']}}" style=" color: gray;">{{ds['unique_id'][:13]}}</a>
                <b>{{ds['dataset_name']}}</b> {{datasets_by_id[ds['unique_id']]['scientific_metadata']|string|truncate(1000)}}
            </li>
            {% endfor %}
        </ul>
</ul>
</div>



<h2>Ancestors</h2>
{% for s in ancestors_info %}
    {% set name = s['sample_name'] %}
    <div class="container p-4 border">
    <h3>{{name}}
        <a href="/{{pc['project_id']}}/sample-graph/{{s['unique_id']}}" style="color: gray;">
            {{s['unique_id'][:13]}}</a>
    </h3>
    <ul>
        <li><b>Path:</b> {{" <- ".join(ancestors_path[name])}}</li>
        <li><b>Description:</b> {{s['description']}}</li>
        <li><b>Datasets:</b>
            <ul>
            {% for ds in s['datasets'] %}
                <li>
                    <a href="/{{pc['project_id']}}/dataset/{{ds['unique_id']}}" style=" color: gray;">{{ds['unique_id'][:13]}}</a>
                    <b>{{ds['dataset_name']}}</b> {{datasets_by_id[ds['unique_id']]['scientific_metadata']|string|truncate(1000)}}
                </li>
            {% endfor %}
            </ul>
        </li>
    </ul>
    </div>
{% endfor %}


<h2>Descendants</h2>
{% if not descendants_info %}
No Descendants
{% endif %}

{% for s in descendants_info %}
{% set name = s['sample_name'] %}
<h3>{{name}}
    <a href="/{{pc['project_id']}}/sample-graph/{{s['unique_id']}}" style="color: gray;">
        {{s['unique_id'][:13]}}</a>
</h3>
<ul>
    <li><b>Path:</b> {{" -> ".join(descendants_path[name])}}</li>
    <li><b>Description:</b> {{s['description']}}</li>
    <li><b>Datasets:</b>
        <ul>
        {% for ds in s['datasets'] %}
            <li>
                <span style=" color: gray;">{{ds['unique_id']}}</span>
                <b>{{ds['dataset_name']}}</b> {{datasets_by_id[ds['unique_id']]['scientific_metadata']|string|truncate(1000)}}
            </li>
        {% endfor %}
        </ul>
    </li>
</ul>

{% endfor %}
</div>

</body>
</html>